<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>多星自主组网卫星观测任务规划系统</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <link href="images/qq.png" rel="icon">

    <!-- Google Web Fonts -->
<!--    <link rel="preconnect" href="https://fonts.googleapis.com">-->
<!--    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap" rel="stylesheet"> -->

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>

<body>
    <div class="container-fluid position-relative d-flex p-0">
        <!-- Spinner Start 动画加载-->
        <div id="spinner" class="show bg-dark position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>


        <div class="sidebar pe-4 pb-3">
            <nav class="navbar bg-secondary navbar-dark">
            <!--    页头——任务管理-->
                <a href="#" class="navbar-brand mx-4 mb-3">
                    <h3 class="text-primary"><i class="fa fa-user-edit me-2"></i>任务管理平台</h3>
                </a>
            <!--     左边用户信息的展示块-->
                <div class="d-flex align-items-center ms-4 mb-4">
                    <div class="position-relative">
                        <img class="rounded-circle" src="images/qq.png" alt="" style="width: 40px; height: 40px;">
                        <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
                    </div>
                    <div class="ms-3">
                        <h6 class="mb-0">管理员</h6>
                        <span>Admin</span>
                    </div>
                </div>
            <!--    左边导航栏介绍-->
                <div class="navbar-nav w-100">
                    <a href="index.html" class="nav-item nav-link mb-4"><i class="fa fa-tachometer-alt me-2"></i>可视化大屏界面</a>
                    <a href="index1.html" class="nav-item nav-link mb-4"><i class="fa fa-th me-2"></i>区域选择界面</a>
                    <a href="Task.html" class="nav-item nav-link mb-4"><i class="fa fa-keyboard me-2"></i>任务提交界面</a>
                    <a href="Platform.html" class="nav-item nav-link mb-4"><i class="fa fa-table me-2"></i>任务管理后台</a>
                    <a href="#" class="nav-item nav-link mb-4"><i class="fa fa-table me-2"></i>平台设置</a>
                </div>
            </nav>
        </div>


        <div class="content">
            <nav class="navbar navbar-expand bg-secondary navbar-dark sticky-top px-4 py-0">
<!--                点击标题返回首页-->
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><i class="fa fa-user-edit"></i></h2>
                </a>
<!--                切换侧边栏的显示状态-->
                <a href="#" class="sidebar-toggler flex-shrink-0">
                    <i class="fa fa-bars"></i>
                </a>
<!--                搜索表单-->
                <form class="d-none d-md-flex ms-4">
                    <input class="form-control bg-dark border-0" type="search" placeholder="Search">
                </form>

<!--                顶部区域-->
                <div class="navbar-nav align-items-center ms-auto">
<!--                带有下拉菜单的信息栏-->
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fa fa-envelope me-lg-2"></i>
                            <span class="d-none d-lg-inline-flex">收信箱</span>
                        </a>
                    </div>

<!--                带有下拉菜单的信息栏-->
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fa fa-bell me-lg-2"></i>
                            <span class="d-none d-lg-inline-flex">提醒事项</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">
                                <h6 class="fw-normal mb-0">01任务已完成</h6>
                                <small>55 minutes ago</small>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item">
                                <h6 class="fw-normal mb-0">05任务已完成</h6>
                                <small>41 minutes ago</small>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item">
                                <h6 class="fw-normal mb-0">03任务未完成</h6>
                                <small>25 minutes ago</small>
                            </a>
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item text-center">See all notifications</a>
                        </div>
                    </div>

<!--                个人设置-->
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src="images/qq.png" alt="" style="width: 40px; height: 40px;">
                            <span class="d-none d-lg-inline-flex">管理员</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">My Profile</a>
                            <a href="#" class="dropdown-item">设置</a>
                            <a href="#" class="dropdown-item">登出</a>
                        </div>
                    </div>
                </div>
            </nav>


<!--            上方数据总结-->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4 hover-bg-warning ">
                            <i class="fa fa-chart-line fa-3x text-primary"></i>
                            <div class="ms-3 text-primary">
                                <h4 class="mb-2" style="color: #fa2929">总任务数量</h4>
                                <h4 class="mb-0" style="text-align: center">524</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4 hover-bg-warning">
                            <i class="fa fa-chart-bar fa-3x text-primary "></i>
                            <div class="ms-3 text-primary">
                                <h4 class="mb-2" style="color: #fa2929">已完成任务</h4>
                                <h4 class="mb-0" style="text-align: center">375</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4 hover-bg-warning">
                            <i class="fa fa-chart-area fa-3x text-primary"></i>
                            <div class="ms-3 text-primary">
                                <h4 class="mb-2" style="color: #fa2929">未完成任务</h4>
                                <h4 class="mb-0" style="text-align: center">44</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-xl-3">
                        <div class="bg-secondary rounded d-flex align-items-center justify-content-between p-4 hover-bg-warning">
                            <i class="fa fa-chart-pie fa-3x text-primary"></i>
                            <div class="ms-3 text-primary">
                                <h4 class="mb-2" style="color: #fa2929">在执行任务</h4>
                                <h4 class="mb-0" style="text-align: center">105</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

<!--            中间两个图表-->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-secondary text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h4 class="mb-0 text-center flex-grow-1">任务完成情况</h4>
                            </div>
                            <canvas id="worldwide-sales"></canvas>
                        </div>
                    </div>

                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-secondary text-center rounded p-4">
                            <div class="d-flex align-items-center justify-content-between mb-4">
                                <h4 class="mb-0 text-center flex-grow-1">任务进度列表</h4>
<!--                                <a href="">Show All</a>-->
                            </div>
<!--                            <canvas id="salse-revenue"></canvas>-->

                            <ul aria-labelledby="navbarDropdownMenuLink2">
                                <li><a class="dropdown-item mt-2" href="#">
                                    <div class="d-flex justify-content-between py-2" style="color: #6262ff;"><strong>Task 1</strong><span>40% complete</span></div>
                                    <div class="progress" style="height: 5px">
                                        <div class="progress-bar bg-dash-color-1" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div></a></li>
                                <li><a class="dropdown-item mt-2" href="#">
                                    <div class="d-flex justify-content-between py-2" style="color: #6262ff"><strong>Task 2</strong><span>20% complete</span></div>
                                    <div class="progress" style="height: 5px">
                                        <div class="progress-bar bg-dash-color-2" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div></a></li>
                                <li><a class="dropdown-item mt-2" href="#">
                                    <div class="d-flex justify-content-between py-2" style="color: #6262ff"><strong>Task 3</strong><span>70% complete</span></div>
                                    <div class="progress" style="height: 5px">
                                        <div class="progress-bar bg-dash-color-3" role="progressbar" style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div></a></li>
                                <li><a class="dropdown-item mt-2" href="#">
                                    <div class="d-flex justify-content-between py-2" style="color: #6262ff"><strong>Task 4</strong><span>40% complete</span></div>
                                    <div class="progress" style="height: 5px">
                                        <div class="progress-bar bg-dash-color-4" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div></a></li>
<!--                                <li><a class="dropdown-item" href="#">-->
<!--                                    <div class="d-flex justify-content-between mb-2" style="color: #6262ff"><strong>Task 5</strong><span>30% complete</span></div>-->
<!--                                    <div class="progress" style="height: 5px">-->
<!--                                        <div class="progress-bar bg-dash-color-1" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>-->
<!--                                    </div></a></li>-->
                            </ul>

                        </div>
                    </div>
                </div>
            </div>

<!--            任务完成列表实现-->
            <div class="container-fluid pt-4 px-4">
                <div class="bg-secondary text-center rounded p-4">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h4 class="mb-0 text-center flex-grow-1">任务完成列表</h4>
<!--                        <a href="#">Show All</a>-->
                    </div>

                    <div class="table-responsive">
                        <table class="table text-center align-middle table-bordered table-hover mb-0">
                            <thead>
                                <tr class="text-white">
                                    <th scope="col" ><input class="form-check-input" type="checkbox"></th>
                                    <th scope="col" style="width: 10%;">任务编号</th>
                                    <th scope="col">任务名称</th>
                                    <th scope="col">组网卫星</th>
<!--                                    <th scope="col">任务详细</th>-->
                                    <th scope="col">任务状态</th>
                                    <th scope="col">任务结果查看</th>
                                </tr>
                            </thead>

                            <tbody>
                            <div id="outerdiv" style="position: fixed;top: 0;left: 0;background: rgba(0, 0, 0, 0.7);
                                                                  z-index: 2;width: 100%;height: 100%;display: none;">
                                <img id="bigimg" src="" />
                            </div>

                                <tr>
                                    <td><input class="form-check-input" type="checkbox"></td>
                                    <td>01</td>
                                    <td>拍摄北京故宫的全景图</td>
                                    <td>
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">BeiDou-3</span>&nbsp;&nbsp;&nbsp;
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">Fengyun-4</span>&nbsp;&nbsp;&nbsp;
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-outline-success m-2">已完成</button>
                                    </td>
                                    <td>
                                        <div class="accordion-item bg-transparent">
                                            <h2 class="accordion-header" id="heading1">
                                                <button class="accordion-button collapsed" type="button"
                                                        data-bs-toggle="collapse" data-bs-target="#collapse1"
                                                        aria-expanded="false" aria-controls="collapse1">
                                                    查看任务结果
                                                </button>
                                            </h2>
                                            <div id="collapse1" class="accordion-collapse collapse"
                                                 aria-labelledby="heading1" data-bs-parent="#accordionExample">
                                                <div class="accordion-body">
                                                    <div class="imgBox">
                                                        <img style="width: 150px; height: 150px; padding: 10px" src="images/gg_demo.png" class="img-responsive" />
<!--                                                        <img style="width: 150px; height: 150px; padding: 10px" src="images/xtu_demo.png" class="img-responsive" />-->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td><input class="form-check-input" type="checkbox"></td>
                                    <td>02</td>
                                    <td>INV-0123</td>
                                    <td>
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">Tianwen-1</span>&nbsp;&nbsp;&nbsp;
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">Ziyuan-3</span>&nbsp;&nbsp;&nbsp;
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">Shijian-20</span>&nbsp;&nbsp;&nbsp;
                                    <td>
                                        <button type="button" class="btn btn-outline-warning m-2">执行中</button>
                                    </td>
    <!--                                <td><a class="btn btn-sm btn-primary" href="">Detail</a></td>-->
                                    <td>
                                        <div class="accordion-item bg-transparent">
                                            <h2 class="accordion-header" id="heading2">
                                                <button class="accordion-button collapsed" type="button"
                                                        data-bs-toggle="collapse" data-bs-target="#collapse2"
                                                        aria-expanded="false" aria-controls="collapse2">
                                                    查看任务结果
                                                </button>
                                            </h2>
                                            <div id="collapse2" class="accordion-collapse collapse"
                                                 aria-labelledby="heading2" data-bs-parent="#accordionExample">
                                                <div class="accordion-body">
<!--                                                    <img src="img/user.jpg" alt="Description of your image">-->
<!--                                                    <img src="img/user.jpg" alt="Description of your image">-->
<!--                                                    <img src="img/user.jpg" alt="Description of your image">-->
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td><input class="form-check-input" type="checkbox"></td>
                                    <td>03</td>
                                    <td>INV-0135</td>
                                    <td>
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">Fengyun-4</span>&nbsp;&nbsp;&nbsp;
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">Ziyuan-1</span>&nbsp;&nbsp;&nbsp;
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">TanSat</span>&nbsp;&nbsp;&nbsp;
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-outline-danger m-2">未完成</button>
                                    </td>
                                    <td>
                                        <div class="accordion-item bg-transparent">
                                            <h2 class="accordion-header" id="heading3">
                                                <button class="accordion-button collapsed" type="button"
                                                        data-bs-toggle="collapse" data-bs-target="#collapse3"
                                                        aria-expanded="false" aria-controls="collapse3">
                                                    查看任务结果
                                                </button>
                                            </h2>
                                            <div id="collapse3" class="accordion-collapse collapse"
                                                 aria-labelledby="heading3" data-bs-parent="#accordionExample">
                                                <div class="accordion-body">
                                                    <p style="margin-top: 5px; margin-bottom: 0">执行时间过长，超过任务规定时间</p>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                                <tr>
                                    <td><input class="form-check-input" type="checkbox"></td>
                                    <td>04</td>
                                    <td>拍摄湘潭大学全景图</td>
                                    <td>
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">BeiDou-3</span>&nbsp;&nbsp;&nbsp;
                                        <span style="text-decoration: underline; text-underline-offset: 7px;">Gaofen-7</span>&nbsp;&nbsp;&nbsp;
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-outline-success m-2">已完成</button>
                                    </td>
                                    <td>
                                        <div class="accordion-item bg-transparent">
                                            <h2 class="accordion-header" id="heading4">
                                                <button class="accordion-button collapsed" type="button"
                                                        data-bs-toggle="collapse" data-bs-target="#collapse4"
                                                        aria-expanded="false" aria-controls="collapse4">
                                                    查看任务结果
                                                </button>
                                            </h2>

                                            <div id="collapse4" class="accordion-collapse collapse"
                                                 aria-labelledby="heading4" data-bs-parent="#accordionExample">
                                                <div class="accordion-body">
<!--                                                    <img src="images/xtu_demo.png" alt="Liberty">-->
                                                    <div class="imgBox">
<!--                                                        <img style="width: 150px; height: 150px; padding: 10px" src="images/gg_demo.png" class="img-responsive" />-->
                                                        <img style="width: 150px; height: 150px; padding: 10px" src="images/xtu_demo.png" class="img-responsive" />
                                                    </div>
<!--                                                    <div id="outerdiv" style="position: fixed;top: 0;left: 0;background: rgba(0, 0, 0, 0.7);-->
<!--                                                                  z-index: 2;width: 100%;height: 100%;display: none;">-->
<!--                                                        <img id="bigimg" src="" />-->
<!--                                                    </div>-->
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


            <div class="container-fluid pt-4 px-4">
                <div class="bg-secondary rounded-top p-4">
                    <div class="row">
                        <div class="col-12 col-sm-6 text-center text-sm-start">
                            &copy; <a href="#">灵蜂-任务管理平台</a>, All Right Reserved.
                        </div>
                        <div class="col-12 col-sm-6 text-center text-sm-end">
                            Designed By <a href="#">LingFeng--LW</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--回到顶部-->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!--实现图片点击放大、拖拽、滚轴滚动焦点缩放功能，相关参数、函数声明-->
    <script>
        let imgWidth, imgHeight; // 图片点击放大初始尺寸参数
        let maxZoom = 6; //最大缩放倍数
        let minreduce = 0.5; // 最小缩放倍数
        let initScale = 1; //滚动缩放初始倍数，并不是图片点击放大的倍数
        let isPointerdown = false; //鼠标按下的标识
        //记录鼠标按下坐标和按下移动时坐标
        let lastPointermove = {
            x: 0,
            y: 0,
        };
        //移动过程从上一个坐标到下一个坐标之间的差值
        let diff = {
            x: 0,
            y: 0,
        };
        //图片放大后左上角的坐标，主要结合diff参数用于鼠标焦点缩放时图片偏移坐标
        let x = 0;
        let y = 0;

        // 记录节点
        const allImg = document.querySelectorAll(".imgBox img");
        const outerdiv = document.querySelector("#outerdiv");
        const image = outerdiv.querySelector("#bigimg");
        window.onload = function () {
            allImg.forEach((item) => {
                item.addEventListener("click", (e) => {
                    const that = e.target;
                    image.style.transform = "scale(1)";
                    //图片放大展示函数调用
                    imgShow(that);
                    // 监听鼠标滚动事件
                    window.addEventListener("wheel", handleStopWheel, {
                        passive: false,
                    });
                    // 拖转事件调用
                    imgDrag();
                });
            });
        };

        function imgShow(that) {
            let src = that.getAttribute("src");
            image.setAttribute("src", src);

            // 设置尺寸和调整比例
            let windowW = document.documentElement.clientWidth;
            let windowH = document.documentElement.clientHeight;
            let realWidth = image.naturalWidth; //获取图片的原始宽度
            let realHeight = image.naturalHeight; //获取图片的原始高度
            let outsideScale = 0.8;
            let belowScale = 1.4;
            let realRatio = realWidth / realHeight;
            let windowRatio = windowW / windowH;

            // 说明：下面是我自己的一些判断逻辑，大致意思就是图片的真实尺寸大于屏幕尺寸则使用屏幕尺寸，如果小于屏幕尺寸就使用自己本身的尺寸；并根据大于或者小于的比例对图片的尺寸进一步调整。coder可以根据自己的要求进行修改。
            if (realRatio >= windowRatio) {
                if (realWidth > windowW) {
                    imgWidth = windowH * outsideScale;
                    imgHeight = (imgWidth / realWidth) * realHeight;
                } else {
                    if (realWidth * belowScale < windowW) {
                        imgWidth = realWidth * (belowScale - 0.2);
                        imgHeight = (imgWidth / realWidth) * realHeight;
                    } else {
                        imgWidth = realWidth;
                        imgHeight = realHeight;
                    }
                }
            } else {
                if (realHeight > windowH) {
                    imgHeight = windowH * outsideScale;
                    imgWidth = (imgHeight / realHeight) * realWidth;
                } else {
                    if (realHeight * belowScale < windowW) {
                        imgHeight = realHeight * (belowScale - 0.2);
                        imgWidth = (imgHeight / realHeight) * realWidth;
                    } else {
                        imgWidth = realWidth;
                        imgHeight = realHeight;
                    }
                }
            }

            //设置放大图片的尺寸、偏移量并展示
            image.style.width = imgWidth + "px";
            image.style.height = imgHeight + "px";
            x = (windowW - imgWidth) * 0.1;
            y = (windowH - imgHeight) * 0.7;
            image.style.transform = `translate3d(${x}px, ${y}px, 0)`;
            outerdiv.style.display = "block";

            // 点击蒙版及外面区域放大图片关闭
            outerdiv.onclick = () => {
                outerdiv.style.display = "none";
                initScale = 1;
                window.removeEventListener("wheel", handleStopWheel);
            };

            // 阻止事件冒泡
            image.onclick = (e) => {
                e.stopPropagation();
            };
        }

        function handleStopWheel(e) {
            let itemSizeChange = 1.1; //每一次滚动放大的倍数
            if (e.target.id == "bigimg") {
                // 说明：e.dataY如果大于0则表示鼠标向下滚动，反之则向上滚动，这里设计为向上滚动为缩小，向下滚动为放大
                if (e.deltaY < 0) {
                    itemSizeChange = 1 / 1.1;
                }
                let _initScale = initScale * itemSizeChange;

                // 说明：在超过或低于临界值时，虽然让initScale等于maxZoom或minreduce，但是在后续的判断中放大图片的最终倍数并没有达到maxZoom或minreduce，而是跳过。
                if (_initScale > maxZoom) {
                    initScale = maxZoom;
                } else if (_initScale < minreduce) {
                    initScale = minreduce;
                } else {
                    initScale = _initScale;
                }
                const origin = {
                    x: (itemSizeChange - 1) * imgWidth * 0.5,
                    y: (itemSizeChange - 1) * imgHeight * 0.5,
                };
                // 计算偏移量
                if (_initScale < maxZoom && _initScale > minreduce) {
                    x -= (itemSizeChange - 1) * (e.clientX - x) - origin.x;
                    y -= (itemSizeChange - 1) * (e.clientY - y) - origin.y;
                    e.target.style.transform = `translate3d(${x}px, ${y}px, 0) scale(${initScale})`;
                }
            }

            // 阻止默认事件
            e.preventDefault();
        }

        function imgDrag() {
            // 绑定 鼠标按下事件
            image.addEventListener("pointerdown", pointerdown);
            // 绑定 鼠标移动事件
            image.addEventListener("pointermove", pointermove);
            image.addEventListener("pointerup", function (e) {
                if (isPointerdown) {
                    isPointerdown = false;
                }
            });
            image.addEventListener("pointercancel", function (e) {
                if (isPointerdown) {
                    isPointerdown = false;
                }
            });
        }

        function pointerdown(e) {
            isPointerdown = true;
            console.log(e.pointerId)

            // 说明：Element.setPointerCapture()将特定元素指定为未来指针事件的捕获目标。指针的后续事件将以捕获元素为目标，直到捕获被释放。可以理解为：在窗口不是全屏情况下，我在拖动放大图片时即使鼠标移出可窗口之外，此时事件还是捕获在该放大图片上。
            image.setPointerCapture(e.pointerId);

            lastPointermove = {
                x: e.clientX,
                y: e.clientY,
            };
        }

        function pointermove(e) {
            if (isPointerdown) {
                const current1 = {
                    x: e.clientX,
                    y: e.clientY,
                };
                diff.x = current1.x - lastPointermove.x;
                diff.y = current1.y - lastPointermove.y;
                lastPointermove = {
                    x: current1.x,
                    y: current1.y,
                };
                x += diff.x;
                y += diff.y;
                image.style.transform = `translate3d(${x}px, ${y}px, 0) scale(${initScale})`;
            }
            e.preventDefault();
        }
    </script>

<!--    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>-->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>-->

    <script src="lib/chart/chart.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <script src="js/main.js"></script>
</body>

</html>